tinymce.PluginManager.requireLangPack('lazyloadimage');
tinymce.PluginManager.add('lazyloadimage', function(editor, url) {
    editor.addButton('lazyloadimage', {
        // text: 'LazyImg',
        icon: 'fa fas fa-spinner',
        tooltip: "lazyloadimage Title",
        onclick: function() {
            let el = tinymce.activeEditor.selection.getNode();
            if(tinymce.DOM.is(el,'img')) {
                let src = tinymce.DOM.getAttrib(el,'src');
                tinymce.DOM.addClass(el,'lazy');
                tinymce.DOM.setAttrib(el,'data-src',src);
                tinymce.DOM.setAttrib(el,'src','');
            }
        }
    });
});