//
// Different block style
//
.grid {
	display: grid;
	grid-gap: var(--grid-gutter);
	grid-template-columns: repeat(auto-fit,minmax(150px,1fr));
}
.list-grid {
	.list-unstyled;
	.grid;
}

.dropdown {
	&:not(.open) {
		.dropdown-toggle .show-less {
			display: none;
		}
	}

	&.open {
		.dropdown-toggle .show-more {
			display: none;
		}
	}

	.dropdown-menu {
		padding: 0;
		box-shadow: 0 0 3px rgba(0,0,0,.4);
		border-radius: 0;
		border: none;
	}

	&:not(.toc-drop) {
		.dropdown-menu {
			min-width: 100%;
			top: ~"calc(100% - 2px)";
		}
	}
	@media (max-width: .breakpoint(sm)[max]) {
		&:not(.toc-drop) {
			.dropdown-menu {
				min-width: 100%;
				top: ~"calc(100% - 125px)"; //~"calc(100% - 2px)";
			}
		}
	}

	.dropdown-header {
		padding: 0;
	}

	.btn {
		text-align: left;
	}
}

.dropdown-header button {
	&:not(.open) {
		.show-less {
			display: none;
		}
	}

	&.open {
		.show-more {
			display: none;
		}
	}
}

.section-block {
	padding-top: 2rem;
	padding-bottom: 2rem;

	+ main, + .section-block {
		padding-top: 0;
	}
}

.text {
	figure {
		margin-bottom: 1rem;
	}
}
// ----- Align btn ------
.btn-align{
	margin-top: var(--grid-gutter);
	margin-bottom: var(--grid-gutter);
	display: flex;
	gap: var(--spacer);
}
@media (max-width: .breakpoint(sm)[max]) {
	.btn-align{
		flex-direction: column;
	}
}
//--------------------------------------------------------
//                       Vignettes
//--------------------------------------------------------
.vignette-list {
	padding-bottom: var(--spacer);
}
.vignette {
	margin-bottom: var(--grid-gutter);

	.h3 {
		margin: var(--spacer) 0;
		--heading-color: var(--main-color);
	}

	.figure {
		position: relative;
		min-height: 100%;
		.shadow(2);

		&:hover, &:focus {
			.caption {
				opacity: 1;
			}
		}
	}

	.desc {
		padding: 1rem;
		background-color: var(--body-bg);
		overflow: hidden;

		p {
			color: var(--light-grey);
		}
	}
}
@media (max-width: .breakpoint(sm)[max]) {
	.vignette {
		&:last-child {
			margin-bottom: 0;
		}
	}
}
//--------------------------------------------------------
//                       Category List
//--------------------------------------------------------
.category-list {
	/**
	 * User input values.
	 */
	--grid-column-count: 4;
	--grid-gap: var(--grid-gutter);
	--grid-item--min-width: 300px;

	/**
	 * Calculated values.
	 */
	--gap-count: calc(var(--grid-column-count) - 1);
	--total-gap-width: calc(var(--gap-count) * var(--grid-gap));
	--grid-item--max-width: calc((100% - var(--total-gap-width)) / var(--grid-column-count));

	grid-template-columns: repeat(auto-fill, minmax(max(var(--grid-item--min-width), var(--grid-item--max-width)), 1fr));
}
.category-card{
	.figure {
		min-height: 100%;
		position: relative;
		display: grid;
		grid-template-rows: subgrid;
		grid-row: span 2;
		//.shadow(2);
		box-shadow: rgba(17, 17, 26, 0.05) 0 1px 0, rgba(17, 17, 26, 0.1) 0 0 8px;
		h3 {
			margin: 0;//0 0 calc(var(--spacer) / 2) 0;
			// On verrouille la hauteur pour 2 lignes de titre
			min-height: 3em;
			//line-height: 1.5em;
			display: -webkit-box;
			-webkit-line-clamp: 2;
			-webkit-box-orient: vertical;
			overflow: hidden;
			--heading-color: var(--text-color);
			transition: color .25s ease-in-out;
		}
		.desc {
			grid-row: 2;
			padding: 1rem;
			background-color: var(--body-bg);

			p {
				color: var(--light-grey);
				font-size: .89rem;
			}
		}
		&:hover, &:focus {
			h3 {
				// Ou si vous utilisez votre variable de titre :
				--heading-color: var(--main-color);
			}
			.caption {
				opacity: 1;
			}
		}
	}
}
//--------------------------------------------------------
//                       Product List
//--------------------------------------------------------
.product-list {
	/**
	 * User input values.
	 */
	--grid-column-count: 4;
	--grid-gap: var(--grid-gutter);
	--grid-item--min-width: 300px;

	/**
	 * Calculated values.
	 */
	--gap-count: calc(var(--grid-column-count) - 1);
	--total-gap-width: calc(var(--gap-count) * var(--grid-gap));
	--grid-item--max-width: calc((100% - var(--total-gap-width)) / var(--grid-column-count));

	grid-template-columns: repeat(auto-fill, minmax(max(var(--grid-item--min-width), var(--grid-item--max-width)), 1fr));
}
.product-card{
	.figure {
		min-height: 100%;
		position: relative;
		display: grid;
		grid-template-rows: subgrid;
		grid-row: span 3;
		//.shadow(2);
		box-shadow: rgba(17, 17, 26, 0.05) 0 1px 0, rgba(17, 17, 26, 0.1) 0 0 8px;
		h3 {
			margin: 0;//0 0 calc(var(--spacer) / 2) 0;
			// On verrouille la hauteur pour 2 lignes de titre
			min-height: 3em;
			//line-height: 1.5em;
			display: -webkit-box;
			-webkit-line-clamp: 2;
			-webkit-box-orient: vertical;
			overflow: hidden;
			--heading-color: var(--text-color);
			transition: color .25s ease-in-out;
		}
		.desc {
			grid-row: 2;
			padding: 1rem;
			background-color: var(--body-bg);

			p {
				color: var(--light-grey);
				font-size: .89rem;
			}
		}
		.product-price{
			grid-row: 3;
			display: flex;
			align-content: center;
			justify-content: center;
			gap: var(--spacer);
			padding-bottom: var(--spacer);
			&:empty {
				min-height: 4em;
			}
			.crossed-price{
				color: var(--sd-color);
				.strike{
					text-decoration: line-through;
				}
				.currency-pack{
					text-decoration: none;
				}
			}
			.price{
				font-size: var(--fz-h3);
				transition: color .25s ease-in-out;
			}
		}
		&:hover, &:focus {
			h3 {
				// Ou si vous utilisez votre variable de titre :
				--heading-color: var(--main-color);
			}
			.price {
				color: var(--main-color);
			}
			.caption {
				opacity: 1;
			}
		}
	}
}
//--------------------------------------------------------
//                     Custom News lists
//--------------------------------------------------------
.news-grid-list {
	/**
	 * User input values.
	 */
	--grid-column-count: 4;
	--grid-gap: var(--grid-gutter);
	--grid-item--min-width: 300px;

	/**
	 * Calculated values.
	 */
	--gap-count: calc(var(--grid-column-count) - 1);
	--total-gap-width: calc(var(--gap-count) * var(--grid-gap));
	--grid-item--max-width: calc((100% - var(--total-gap-width)) / var(--grid-column-count));

	grid-template-columns: repeat(auto-fill, minmax(max(var(--grid-item--min-width), var(--grid-item--max-width)), 1fr));
}
@media (max-width: .breakpoint(sm)[max]) {
	.news-card {
		&:last-child {
			//margin-bottom: 0;
		}
	}
}
.news-card {
	margin-bottom: var(--grid-gutter);
	//transition: transform 0.30s ease;
	.figure {
		min-height: 100%;
		position: relative;
		display: grid;
		grid-template-rows: subgrid;
		grid-row: span 4;
		//.shadow(2);
		box-shadow: rgba(17, 17, 26, 0.05) 0 1px 0, rgba(17, 17, 26, 0.1) 0 0 8px;
		h3 {
			margin: 0;//0 0 calc(var(--spacer) / 2) 0;
			// On verrouille la hauteur pour 2 lignes de titre
			min-height: 3em;
			//line-height: 1.5em;
			display: -webkit-box;
			-webkit-line-clamp: 2;
			-webkit-box-orient: vertical;
			overflow: hidden;
			--heading-color: var(--text-color);
			transition: color .25s ease-in-out;
		}
		.date {
			grid-row: 2;
			grid-column: 1;
			justify-self: right;
			width: fit-content;
			align-self: start;
			margin-top: -2.2rem;//35px
			z-index: 2;
			background: var(--dark-color);
			color: var(--white);
			padding: 0.5rem 1rem;
			display: flex;
			align-items: center;
			justify-content: center;
			border-radius: 5px;
			margin-right: 2rem;
			box-shadow: 0 0 0 2px var(--white);
			transition: background-color .25s ease-in-out;
		}
		.desc {
			grid-row: 3;
			padding: 1rem;
			background-color: var(--body-bg);

			p {
				color: var(--light-grey);
				font-size: .89rem;
			}
		}
		.tag-list{
			grid-row: 4;
			padding: 1rem;
			&:empty {
				padding: 1rem;
				min-height: 4em;
			}
		}
		img {
			border-bottom: 1px solid var(--main-color);
		}
		&:hover, &:focus {
			h3 {
				// Ou si vous utilisez votre variable de titre :
				--heading-color: var(--main-color);
			}
			.date {
				background: var(--main-color);
			}
			.caption {
				opacity: 1;
			}
		}
	}
	&:hover, &:focus {
		//transform: scale(1.05); // Zoom de 5%
	}
}
// Count 1 (large)
.news-card-large {
	margin-bottom: var(--grid-gutter);
	.figure {
		display: grid;
		//.shadow(2);
	}
	@media (min-width: .breakpoint(sm)[max]) {
		.figure {
			grid-template-columns: 40% 1fr;
			// On définit explicitement 2 lignes pour être sûr que le texte ait de la place
			grid-template-rows: auto auto;
			gap: 0; // On gère les espaces avec le padding pour que l'image touche les bords
			align-items: stretch;
			position: relative;

			h3 {
				transition: color .25s ease-in-out;
			}

			.time-figure {
				grid-column: 1;
				grid-row: 1 / span 2; // L'image occupe toute la hauteur
				height: 100%;

				img {
					width: 100%;
					height: 100%;
					object-fit: cover;
					display: block;
					transition: transform 0.30s ease;
				}
			}

			.desc {
				grid-column: 2;
				grid-row: 1 / span 2; // ON FORCE le texte à occuper aussi toute la hauteur disponible
				padding: 2rem 0 2rem 2rem;
				align-self: center; // MAINTENANT le centrage fonctionne car la zone est grande
			}

			.date {
				grid-row: 1;
				grid-column: 1;
				justify-self: end;
				align-self: start;
				margin-top: 15px;
				margin-right: 15px;
				z-index: 2;
				background: var(--dark-color);
				color: var(--white);
				padding: 0.5rem 1rem;
				border-radius: 4px;
				box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
				transition: background-color .25s ease-in-out;
			}

			.tag-list {
				margin-top: var(--spacer);
				display: flex;
			}

			&:hover, &:focus {
				h3 {
					// Ou si vous utilisez votre variable de titre :
					--heading-color: var(--main-color);
				}

				.date {
					background: var(--main-color);
				}

				img {
					transform: scale(1.05); // Zoom de 5%
				}
			}
		}
	}
	@media (max-width: .breakpoint(sm)[max]) {
		.figure {
			grid-template-rows: auto auto;
			gap: 0;
			border-bottom: 1px solid var(--main-color);
			padding-bottom: var(--spacer);

			.date {
				margin-right: var(--spacer);
				margin-top: -4.5rem;
				background: var(--dark-color);
				color: var(--white);
				padding: 0.5rem 1rem;
				border-radius: 4px;
				box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
				justify-self: end;
				align-self: start;
			}

			.tag-list {
				margin-top: var(--spacer);
				display: flex;
			}
		}
	}
	@media (min-width: .breakpoint(sm)[max]) {
		&:nth-child(even) {
			.figure {
				grid-template-columns: 1fr 40%;

				.time-figure {
					grid-column: 2;
					grid-row: 1 / span 2; // BIEN REMETTRE le span 2 ici aussi
				}

				.desc {
					grid-column: 1;
					grid-row: 1 / span 2; // BIEN REMETTRE le span 2 ici aussi
					//text-align: right;
					padding: 2rem 2rem 2rem 0;
					align-self: center;
				}

				.date {
					grid-column: 2;
					justify-self: start;
					margin-left: 15px;
					margin-right: 0;
				}
			}
		}
	}
	@media (max-width: .breakpoint(sm)[max]) {
		&:last-child {
			.figure {
				border-bottom: none;
				//padding-bottom: 0;
				//margin-bottom: 0;
			}
		}
	}
}
// --------------------------------------------------------
//                     Custom lists
//--------------------------------------------------------
ul {
	&.arrow-list,
	&.bullet-list,
	&.circle-list,
	&.square-list,
	&.label-list {
		.list-unstyled;

		> li {
			padding-left: 1.5rem;
			position: relative;

			&::before {
				position: absolute;
				top: calc(((1rem * var(--line-height)) - 1em ) / 2);
				.ico;
				color: var(--main-color);
				left: 0;
			}
		}
	}

	&.bullet-list,
	&.circle-list {
		> li:before {
			font-size: 10px;
		}
	}
	&.bullet-list > li::before {
		content: @ico-disk;
	}
	&.circle-list > li::before {
		content: @ico-circle;
	}
	&.square-list {
		> li:before {
			content: @ico-square;
			font-size: 12px;
		}
	}
	&.arrow-list {
		> li:before {
			content: @ico-keyboard_arrow_right;
			font-size: 18px;
		}
	}
	&.label-list > li:before {
		content: @ico-label;
	}
}

//--------------------------------------------------------
//                  Cookie Consent Alert
//--------------------------------------------------------
#cookies {
	font-size: .875rem;
	position: fixed;
	bottom: var(--footbar-h);
	right: var(--grid-gutter);
	max-width: calc(100% - (var(--grid-gutter) * 2));
	width: 100%;
	z-index: @z-fixed + 1;
	background: var(--body-bg);
	//color: var(--white);
	padding: calc(var(--grid-gutter) + 4rem) var(--grid-gutter) var(--grid-gutter) var(--grid-gutter);
	display: flex;
	flex-flow: column;
	border-radius: 1rem;
	.shadow(2);

	&:before {
		z-index: 0;
		content: '';
		position: absolute;
		top: var(--grid-gutter);
		left: 50%;
		transform: translateX(-50%);
		width: 4rem;
		height: 4rem;
		//background: transparent url("@{imgpath}cookie.svg") no-repeat top center;
		background: transparent url("/img/cookie.svg") no-repeat top center;
		background-size: contain;
	}

	p {
		margin: 0;
		display: flex;
	}
	.btns {
		display: flex;
		gap: .5rem;

		.btn {
			--btn-font-size: .875rem;
			flex: 1 0 calc(50% - .25rem);
		}
	}

	//.normalize-link(var(--white));

	.material-icons {
		margin-right: .25rem;
	}
}

@media (min-width: .breakpoint(sm)[min]) {
	#cookies {
		@bpmax: .breakpoint(xs)[max];
		max-width: calc(@bpmax - var(--grid-gutter));
	}
}
@media (max-width: .breakpoint(sm)[max]) {
	#cookies {
		flex-direction: column;
		gap: .5rem;
	}
}
@media (min-width: .breakpoint(sm)[min]) {
	#cookies {
		align-items: center;
		justify-content: space-between;

		.btns {
			margin-left: auto;
		}
	}
}